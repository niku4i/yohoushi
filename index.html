<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <link rel="stylesheet" type="text/css" href="stylesheets/yohoushi.css" media="screen" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Yohoushi - for all users who love graphs!</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Yohoushi</h1>
        <h2>Yohoushi loves GrowthForecast</h2>
        <a href="https://github.com/yohoushi/yohoushi" class="button"><small>View project on</small>GitHub</a>
        <div class="language">
          <button class="lang-button selected">English</button>
          <button onclick='location.href="jp/"' class="lang-button not-selected">Japanese</button>
        </div>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
        
<h2>About Yohoushi
<a name="welcome-to-yohoushi" class="anchor" href="#welcome-to-yohoushi"><span class="octicon octicon-link">&dagger;</span></a></h2>

<p>Yohoushi is for all users who love graphs. It is a graphing tool designed to collaborate with <a href="http://kazeburo.github.io/GrowthForecast/">GrowthForecast</a> where Yohoushi as a front-end and GrowthForecast(s) as back-ends.</p>

<p>Yohoushi shows you graphs stored in a GrowthForecast in multiple approaches. You can see large-sized graphs, specify start/end time date, and see a number of thumbnail graphs in one page. And, it also supports an unlimited hierarchical graph tree.</p>

<p>Also, it supports multiple GrowthForecast clusters. Yohoushi provides you highly scalable system.</p>
<pre><code>         +----------+                 +---+
         |          |            +--> |GF1| <--- post a number 
Ops ---> | Yohoushi | <----------+    +---+
         |          |            |    +---+
         +----------+            +--> |GF2| <--- post a number
                                      +---+
</code></pre>

<p>If you are already an user of GrowthForecast, no reason not to try Yohoushi! Adding Yohoushi into the existing system is really easy, just run Yohoushi. You'll notice that you don't need to change a script to post a number to GrowthForecast. <a href="screencasts">Screencasts</a>(Sorry but japanese only) help you to understand shortly how Yohoushi works.</p>

<h2>Installation
<a name="instalation" class="anchor" href="#installation"><span class="octicon octicon-link">&dagger;</span></a></h2>

<h3>(1) Requirements
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link">&dagger;</span></a></h3>

<p>Please install them beforehand.</p>
<ol>
  <li>Ruby (>=2.0.0)</li>
  <li>MySQL or Sqlite3 (>=3.6.16)</li>
  <li>GrowthForecast (>=0.62)</li>
</ol>

<h3>(2) Install Yohoushi
<a name="install-yohoushi" class="anchor" href="#install-yohoushi"><span class="octicon octicon-link">&dagger;</span></a></h3>

<p>Download the yohoushi from <a href="https://github.com/yohoushi/yohoushi/releases">yohoushi/releases</a>, and unarchive it. Execute the following command in the yohoushi directory. </p>

<pre><code>$ bin/bundle
</code></pre>

<h3>(3) Configure Application
<a name="configure-applicaiton" class="anchor" href="#configure-applicaiton"><span class="octicon octicon-link">&dagger;</span></a></h3>

<p>Register URL(s) of GrowthForecast(s) on config/application.yml. Yohoushi connects to a GrowthForecast running on localhost:5125 as default.</p>

<pre><code># config/application.yml
multiforecast:
  mapping:
    '':     'http://localhost:5125'
</code></pre>

<p>To connect to multiple GrowthForecast servers, write your mapping rule as follows:<p>

<pre><code># config/application.yml
multiforecast:
  mapping:
    'app1/':     'http://host.to.growthforecast1:5125'
    'app2/':     'http://host.to.growthforecast2:5125'
</code></pre>

<p>In this example, Yohoushi maps graphs whose names starting from 'app1/' and 'app2/', to 'host.to.growthforecast1:5125' and 'host.to.growthforecast2:5125' respectively. </p>

<h3>(4) Configure Database
<a name="configure-database" class="anchor" href="#configure-database"><span class="octicon octicon-link">&dagger;</span></a></h3>

<p>Write MySQL configuration on config/database.yml, and execute the following command.</p>

<pre><code>$ bin/rake db:create db:migrate
</code></pre>

<p>As default, this command connects to MySQL located on localhost:3306 with root user / no password, and creates a database named `yohoushi`. </p>

<pre><code># config/database.yml
  adapter: mysql2
  database: yohoushi
  pool: 5
  timeout: 5000
  username: root
  password: 
  host: localhost
  port: 3306
</code></pre>

<h4>Support SQLite
<a name="configure-database" class="anchor" href="#support-sqlite"><span class="octicon octicon-link">&dagger;</span></a></h4>

<p>To use SQLite instead of MySQL, do the following procedures. </p>

<p>Modify Gemfile as followings:</p>
<pre><code># Gemfile
gem 'sqlite3'  # activate this line
# gem 'mysql2' # comment out this line
</code></pre>

<p>Execute below commands.</p>
<pre><code>$ cp config/database-sqlite.yml config/database.yml
$ bin/bundle
$ bin/rake db:create db:migrate
</code></pre>

<h3>(5) Run
<a name="run" class="anchor" href="#run"><span class="octicon octicon-link">&dagger;</span></a></h3>

<p>Just,</p>

<pre><code>$ bin/yohoushi</code></pre>

<p>And you're done! Point your web browser at <code>http://localhost:4804</code>. </p>

<p>To daemonize, run with <code>-d</code> option.</p>

<pre><code>$ bin/yohoushi -d</code></pre>

<p>To stop the daemonized Yohoushi, execute</p>

<pre><code>$ bin/yohoushi stop</code></pre>

<h3>(6) Check
<a name="check" class="anchor" href="#check"><span class="octicon octicon-link">&dagger;</span></a></h3>

<p>To check Yohoushi is working well, let's POST a number to GrowthForecast. Here, let me assume GrowthForecast is working on localhost:5125. </p>

<pre><code>$ curl -d 'number=10' http://localhost:5125/api/service1/section1/graph1
</code></pre>

<p>Success if this graph is shown on Yohoushi. You may wait a minute at maximum until the Yohoushi worker synchronizes graph data with GrowthForecast. </p>

<h2>For more information
<a name="for-more-infomation" class="anchor" href="#for-more-information"><span class="octicon octicon-link">&dagger;</span></a></h2>

<p>You may use Yohoushi API or <a href="https://github.com/sonots/multiforecast-client">multiforecast-client</a> to create graphs of 4 levels or more.</p></p>

<p>Use the Yohoushi API as belows. It distributes POST data to an appropriate GrowthForecast.</p>

<pre><code>$ curl -d 'number=10' http://yohoushi:4804/api/graphs/sec1/sec2/sec3/graph1
</code></pre>

<p>However, there is a possibility that Yohoushi will be a bottleneck by overuse of its API, therefore, 
it is recommended to use a <a href="https://github.com/sonots/multiforecast-client">multiforecast-client</a> that will POST data directly to GrowthForecast(s) according to mapping rules.</p>

        </section>

        <aside id="sidebar">
          <a href="https://github.com/yohoushi/yohoushi/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/yohoushi/yohoushi/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/yohoushi/yohoushi"></a> is maintained by <a href="https://github.com/yohoushi">yohoushi</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
